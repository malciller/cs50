{% extends 'layout.html' %}

{% block title %}Home Page{% endblock %}

{% block content %}
<div class="custom-container">
    <ul class="custom-nav-tabs" role="tablist">
        <li class="custom-nav-item">
            <a class="custom-nav-link active" id="user-info-tab" href="#userInfo" role="tab" aria-controls="userInfo"
                aria-selected="true">Account</a>
        </li>
        <li class="custom-nav-item">
            <a class="custom-nav-link" id="chat-tab" href="#chat" role="tab" aria-controls="chat"
                aria-selected="false">Chat</a>
        </li>
    </ul>

    <div class="custom-tab-content">
        <div class="custom-tab-pane show active" id="userInfo" role="tabpanel" aria-labelledby="user-info-tab">
            {% include 'partials/user_info.html' %}
        </div>
        <div class="custom-tab-pane" id="chat" role="tabpanel" aria-labelledby="chat-tab" >
            {% include 'partials/chat.html' %}
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const tabs = document.querySelectorAll('.custom-nav-link');

        tabs.forEach(tab => {
            tab.addEventListener('click', function (event) {
                event.preventDefault();

                // Remove the active class and set aria-selected to false for all tabs
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.setAttribute('aria-selected', 'false');
                });

                // Add the active class and set aria-selected to true for the clicked tab
                this.classList.add('active');
                this.setAttribute('aria-selected', 'true');

                // Hide all tab panes
                const tabPanes = document.querySelectorAll('.custom-tab-pane');
                tabPanes.forEach(pane => {
                    pane.classList.remove('active', 'show');
                    pane.style.display = 'none';
                });

                // Show the clicked tab's content pane
                const targetPane = document.querySelector(this.getAttribute('href'));
                if (targetPane) {
                    targetPane.classList.add('active', 'show');
                    targetPane.style.display = 'block';
                }
            });
        });
    });

    // Function to hide all forms and remove the selected class from all buttons
    function hideAllForms() {
        const forms = document.querySelectorAll('.centered-form form');
        forms.forEach(form => {
            form.style.display = 'none';
        });
        const buttons = document.querySelectorAll('.top-buttons button');
        buttons.forEach(button => {
            button.classList.remove('selected');
        });
    }

    // Function to toggle form visibility and button selected state
    function toggleForm(formId, button) {
        const form = document.getElementById(formId);
        if (form.style.display === 'none') {
            hideAllForms();
            form.style.display = 'block';
            button.classList.add('selected');
        } else {
            form.style.display = 'none';
            button.classList.remove('selected');
        }
    }

    // Event listeners for buttons
    document.getElementById('updateEmailButton').addEventListener('click', function () {
        toggleForm('updateEmailForm', this);
    });

    document.getElementById('updateApiKeyButton').addEventListener('click', function () {
        toggleForm('updateApiKeyForm', this);
    });

    document.getElementById('resetPasswordButton').addEventListener('click', function () {
        toggleForm('resetPasswordForm', this);
    });

    document.getElementById('deleteAccountButton').addEventListener('click', function () {
        toggleForm('deleteAccountForm', this);
    });

    // Event listeners for cancel buttons
    document.getElementById('cancelEmailUpdate').addEventListener('click', function () {
        hideAllForms();
    });

    document.getElementById('cancelApiKeyUpdate').addEventListener('click', function () {
        hideAllForms();
    });

    document.getElementById('cancelPasswordUpdate').addEventListener('click', function () {
        hideAllForms();
    });

    document.getElementById('cancelDeleteAccount').addEventListener('click', function () {
        hideAllForms();
    });

</script>


{% endblock %}